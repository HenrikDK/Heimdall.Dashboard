<template id="services">
    <div class="pl-2 pr-4 w-100">
        <div class="flex my-2 items-center">
            <span class="text-gray-500 dark:text-gray-300 text-2xl font-light sans">Services</span>
        </div>
        
        <template v-if="services && services.length > 0">
            <vuetable :columns="columns" :sorting="sorting" :data="services" :namespaces="namespaces" :search="search"></vuetable>
        </template>
    </div>
</template>

<script type="module">
    components["services"] = {
        template: "#services",
        data() {
            return {
                services: [
                    {type: "ClusterIP", name: "user-api", namespace:"petstore", kubeDNS:"petstore.user-api:8080", age: "22d4h"},
                    {type: "NodeIP", name: "store-api", namespace:"petstore", kubeDNS:"petstore.store-api:8080", age: "10d5h"},
                    {type: "LoadBalancer", name: "order-api", namespace:"petstore", kubeDNS:"petstore.order-api:8080", age: "13d5h"},
                    {type: "ClusterIP", name: "management-ui", namespace:"petstore", kubeDNS:"petstore.management-ui:8080", age: "14min"},
                    {type: "NodeIP", name: "pet-api", namespace:"petstore", kubeDNS:"petstore.pet-api:8080", age: "1h20m"},                    
                ],
                columns: [
                    {header:"Type", name:"type", classes:"w-64", canSort: false},
                    {header:"Name", name:"name", classes:"w-64"},
                    {header:"Namespace", name:"namespace", classes:"w-64"},
                    {header:"KubeDNS", name:"kubeDNS", minWidth:400},
                    {header:"Age", name:"age", minWidth:200, classes:"w-32"},                    
                ],
                sorting: [],
                clusterServices: null,
            }
        },
        props: ['namespaces', 'search'],
        mounted() {
          var host = window.location.origin;
          streamResults(host + '/api/v1/services', j => this.clusterServices = j)
        },
    };
    
    routes.push({path:'/services', name:'services', component: components["services"]})    
</script>

<style>
</style>